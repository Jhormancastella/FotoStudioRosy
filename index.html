<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foto Estudio Rosy</title>
    <link rel="shortcut icon" href="https://res.cloudinary.com/dipv76dpn/image/upload/v1757801787/fjtfrshjkyxdtuscpkk5.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}
        body{background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);color:#333;line-height:1.6;min-height:100vh;padding:20px}
        .container{max-width:1200px;margin:0 auto;background:white;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,.1);overflow:hidden}
        header{background:linear-gradient(90deg,#e9cde1 0%,#fc25a2 100%);color:#a10000;padding:25px;text-align:center;position:relative}
        .logo{font-size:2.5rem;font-weight:bold;margin-bottom:10px;display:flex;align-items:center;justify-content:center;gap:15px}
        .logo span{font-family:'Great Vibes',cursive;font-size:3.2rem;letter-spacing:1px;font-weight:400}
        .tagline{font-style:italic;opacity:.9}
        .admin-controls{position:absolute;top:20px;right:20px;display:flex;gap:10px;align-items:center}
        .admin-btn{padding:8px 15px;background:rgba(255,255,255,.2);color:#fff;border:1px solid #fff;border-radius:20px;cursor:pointer;transition:all .3s}
        .admin-btn:hover{background:#fff;color:#6a11cb}
        #adminStatus.hidden{display:none}
        .main-content{padding:30px}
        .upload-options{display:flex;gap:20px;margin-bottom:30px;flex-wrap:wrap}
        .option-card{flex:1;min-width:280px;background:#fff;border-radius:10px;padding:20px;box-shadow:0 5px 15px rgba(0,0,0,.05);border:1px solid #eee;text-align:center;transition:transform .3s}
        .option-card:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,.1)}
        .option-card i{font-size:3rem;color:#6a11cb;margin-bottom:15px}
        .option-card h3{margin-bottom:15px;color:#444}
        .option-card button{padding:10px 20px;background:#6a11cb;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background .3s}
        .option-card button:hover{background:#2575fc}
        .upload-area{border:2px dashed #6a11cb;border-radius:10px;padding:30px;text-align:center;margin-top:20px;background:#f9f9ff;display:none}
        .upload-area.active{display:block}
        .upload-area i{font-size:3rem;color:#6a11cb;margin-bottom:15px}
        .url-input{width:100%;padding:12px;border:1px solid #ddd;border-radius:5px;margin:15px 0;font-size:1rem}
        .submit-btn{padding:12px 25px;background:#6a11cb;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1rem;transition:background .3s}
        .submit-btn:hover{background:#2575fc}
        .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;margin-top:30px}
        .gallery-item{position:relative;border-radius:10px;overflow:hidden;box-shadow:0 5px 15px rgba(0,0,0,.1);transition:transform .3s;height:200px}
        .gallery-item:hover{transform:scale(1.03)}
        .gallery-item img{width:100%;height:100%;object-fit:cover;display:block}
        .gallery-item .delete-btn{position:absolute;top:10px;right:10px;background:rgba(231,76,60,.8);color:#fff;border:none;border-radius:50%;width:30px;height:30px;cursor:pointer;display:none}
        .gallery-item:hover .delete-btn{display:block}
        .empty-message{text-align:center;color:#777;font-style:italic;grid-column:1/-1;padding:40px;background:#f9f9f9;border-radius:10px}
        .modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,.7)}
        .modal-content{background:#fefefe;margin:15% auto;padding:25px;border-radius:10px;width:90%;max-width:400px;position:relative;box-shadow:0 5px 25px rgba(0,0,0,.2)}
        .modal-content h2{margin-bottom:20px;color:#6a11cb;text-align:center}
        .modal-content input{width:100%;padding:12px;margin:12px 0;border:1px solid #ddd;border-radius:5px;font-size:1rem}
        .modal-content button{width:100%;padding:12px;background:#6a11cb;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:1rem;margin-top:10px}
        .modal-content button:hover{background:#2575fc}
        .close{position:absolute;top:10px;right:20px;color:#aaa;font-size:28px;font-weight:bold;cursor:pointer}
        .close:hover{color:#000}
        @media(max-width:768px){.upload-options{flex-direction:column}.admin-controls{position:static;justify-content:center;margin-top:15px}.gallery{grid-template-columns:repeat(auto-fill,minmax(150px,1fr))}}
        .hidden{display:none!important}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="https://res.cloudinary.com/dipv76dpn/image/upload/v1757801787/fjtfrshjkyxdtuscpkk5.png" alt="Logo" style="height:80px">
                <span>Rosy Photo Studio</span>
            </div>
            <p class="tagline">Capturando momentos especiales para toda la vida</p>
            <div class="admin-controls">
                <button id="adminLoginBtn" class="admin-btn"><i class="bi bi-person-circle"></i></button>
                <button id="logoutBtn" class="admin-btn hidden"><i class="bi bi-box-arrow-right"></i></button>
                <div id="adminStatus" class="admin-status hidden">Modo Visitante</div>
            </div>
        </header>

        <div class="main-content">
            <div id="uploadSection" class="hidden">
                <h2>Subir Nueva Imagen</h2>
                <div class="upload-options">
                    <div class="option-card">
                        <i class="fas fa-upload"></i>
                        <h3>Subir desde tu dispositivo</h3>
                        <button id="cloudinaryBtn">Abrir Cloudinary</button>
                    </div>
                    <div class="option-card">
                        <i class="fas fa-link"></i>
                        <h3>Usar enlace de imagen</h3>
                        <button id="useUrlBtn">Usar URL</button>
                    </div>
                </div>
                <div id="urlUploadArea" class="upload-area">
                    <i class="fas fa-link"></i>
                    <p>Ingresa la URL de una imagen en internet</p>
                    <input type="text" id="urlInput" class="url-input" placeholder="https://ejemplo.com/imagen.jpg">
                    <button class="submit-btn" id="urlSubmit">Agregar Imagen</button>
                </div>
            </div>

            <div class="gallery-section">
                <center><h2>Galería de Imágenes</h2></center>
                <div class="gallery" id="imageGallery">
                    <p class="empty-message" id="emptyMessage">No hay imágenes en la galería.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de login -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Acceso de Administrador</h2>
            <p>Ingrese la contraseña para acceder al modo administrador:</p>
            <input type="password" id="passwordInput" placeholder="Contraseña">
            <button id="loginBtn">Ingresar</button>
            <p id="loginMessage" class="message"></p>
        </div>
    </div>

    <!-- Cloudinary upload widget -->
    <script src="https://upload-widget.cloudinary.com/global/all.js" type="text/javascript"></script>
    <script>
        const CLOUD_NAME   = 'dipv76dpn';      // ← cambiar
        const UPLOAD_PRESET= 'rosy_unsigned'; // ← cambiar

        let isAdmin   = localStorage.getItem('isAdmin') === 'true';
        let gallery   = JSON.parse(localStorage.getItem('galleryImages')) || [];

        const loginModal = document.getElementById('loginModal');
        const adminLoginBtn = document.getElementById('adminLoginBtn');
        const logoutBtn = document.getElementById('logoutBtn');
        const adminStatus = document.getElementById('adminStatus');
        const uploadSection = document.getElementById('uploadSection');
        const passwordInput = document.getElementById('passwordInput');
        const loginBtn = document.getElementById('loginBtn');
        const loginMessage = document.getElementById('loginMessage');
        const closeModal = document.querySelector('.modal .close');
        const urlInput = document.getElementById('urlInput');
        const urlSubmit = document.getElementById('urlSubmit');
        const imageGallery = document.getElementById('imageGallery');
        const emptyMessage = document.getElementById('emptyMessage');
        const cloudinaryBtn = document.getElementById('cloudinaryBtn');

        initApp();

        function initApp() {
            updateUI();
            renderGallery();
            adminLoginBtn.addEventListener('click', openLoginModal);
            logoutBtn.addEventListener('click', logout);
            loginBtn.addEventListener('click', attemptLogin);
            closeModal.addEventListener('click', () => loginModal.style.display = 'none');
            window.addEventListener('click', e => { if (e.target === loginModal) loginModal.style.display = 'none'; });

            urlSubmit.addEventListener('click', handleUrlUpload);
            cloudinaryBtn.addEventListener('click', openCloudinary);

            const widget = cloudinary.createUploadWidget({
                cloudName: CLOUD_NAME,
                uploadPreset: UPLOAD_PRESET,
                sources: ['local', 'url', 'camera']
            }, (error, result) => {
                if (!error && result && result.event === "success") {
                    addImageToGallery({
                        id: Date.now(),
                        src: result.info.secure_url,
                        name: result.info.original_filename || 'Cloudinary'
                    });
                }
            });
            window.cloudinaryWidget = widget;
        }

        function openCloudinary() { if (isAdmin) window.cloudinaryWidget.open(); }

        function updateUI() {
            if (isAdmin) {
                adminStatus.textContent = 'Modo Administrador';
                adminStatus.classList.remove('hidden');
                uploadSection.classList.remove('hidden');
                adminLoginBtn.classList.add('hidden');
                logoutBtn.classList.remove('hidden');
            } else {
                adminStatus.classList.add('hidden');
                uploadSection.classList.add('hidden');
                adminLoginBtn.classList.remove('hidden');
                logoutBtn.classList.add('hidden');
            }
        }

        function openLoginModal() { loginModal.style.display = 'block'; passwordInput.focus(); }
        function logout() { isAdmin = false; localStorage.setItem('isAdmin', 'false'); updateUI(); }
        function attemptLogin() {
            if (passwordInput.value === 'Nileynave') {
                isAdmin = true; localStorage.setItem('isAdmin', 'true'); updateUI(); loginModal.style.display = 'none';
            } else { loginMessage.textContent = 'Contraseña incorrecta.'; }
        }

        function handleUrlUpload() {
            if (!isAdmin) return;
            const url = urlInput.value.trim();
            if (!url) { alert('URL vacía'); return; }
            try { new URL(url); } catch { alert('URL inválida'); return; }
            const img = new Image();
            img.onload = () => {
                addImageToGallery({ id: Date.now(), src: url, name: 'Imagen URL' });
                urlInput.value = '';
            };
            img.onerror = () => alert('No se pudo cargar la imagen');
            img.src = url;
        }

        function addImageToGallery(data) {
            gallery.push(data);
            localStorage.setItem('galleryImages', JSON.stringify(gallery));
            emptyMessage.style.display = 'none';
            renderGallery();
        }

        function renderGallery() {
            imageGallery.innerHTML = '';
            if (!gallery.length) { emptyMessage.style.display = 'block'; imageGallery.appendChild(emptyMessage); return; }
            gallery.forEach(img => {
                const item = document.createElement('div'); item.className = 'gallery-item';
                item.innerHTML = `<img src="${img.src}" alt="${img.name}">`;
                if (isAdmin) {
                    const del = document.createElement('button'); del.className = 'delete-btn'; del.innerHTML = '×';
                    del.onclick = () => { if (confirm('¿Eliminar?')) { gallery = gallery.filter(x => x.id !== img.id); localStorage.setItem('galleryImages', JSON.stringify(gallery)); renderGallery(); } };
                    item.appendChild(del);
                }
                imageGallery.appendChild(item);
            });
        }
    </script>
</body>
</html>